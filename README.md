# scp 编程语言

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](./LICENSE-MIT)
[![License: Apache-2.0](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](./LICENSE-APACHE)

## 概述

SCP 是一款现代化系统级编程语言，融合了安全、性能与表达力的三重优势。作为 C 语言的自然演进，SCP 保留了底层硬件控制能力，同时引入了面向对象、泛型编程和函数式编程范式，提高开发效率的编程体验。

SCP 语言在设计上融合了多个现代编程语言的优秀特性：采用 Rust 的内存安全机制确保内存访问安全，借鉴 Kotlin 简洁优雅的语法设计提升开发体验，吸收 Swift 的现代语言特性增强表达能力。同时，SCP 保持了与 C 语言同等的底层系统控制能力，并提供了与 C/C++ 库的无缝互操作性。

scp 语言基于 LLVM 构建，提供精确的错误诊断和代码提示，使用 MLIR 进行平台无关优化生成高度优化的机器码，支持 x86、ARM、RISC-V 等多种架构

## 特性
- 面向对象、泛型、函数式编程支持
- 静态类型检查与内存安全
  - 通过所有权系统和生命周期分析，在编译期消除空指针解引用、野指针和数据竞争
- 高可读性与可维护性
- 编译文件体积小
- 语法简洁，易于上手

## 用法示例

```scp
#include "scp.stdio.h"

fun main() {
    println("Hello, scp!")
}
```

## 关键字与语法

### 硬关键字（Hard Keywords）
| 关键字 | 描述 |
| --- | --- |
| class,enum,struct,obj | 定义类、枚举、结构体、单例对象 |
| if,else,when,match,for,while,do,break,continue,return,yield | 条件判断、循环控制、生成器函数 |
| try,catch,finally,throw | 异常捕获与处理 |
| is,!is,as,as? | 类型检查与转换 |
| true,false,null | 布尔值、空值 |
| in,!in| 集合操作|
| this,super | 当前对象引用、父类调用 |
| fun,operator | 定义函数、操作符重载 |

### 软关键字（Soft Keywords）
| 关键字 | 描述|
| --- | ---|
| annotation,sealed,data,companion | 注解类、密封类、数据类、伴生对象 |
| where | 泛型约束|
| async,await,by,macro,unsafe,actual,crate,use,mod,package | 异步、委托、宏、模块相关关键字 |
| dynamic,unsized,type| 动态大小类型、类型别名 |

### 修饰符关键字（Modifier Keywords）
| 关键字 | 描述|
| --- | ---|
| open,final,impl| 允许继承、禁止继承、定义接口|
| val,var,const,lateinit| 声明变量、常量、延迟初始化  |
| pub,priv,prot,inter| 公有、私有、受保护、模块内可见性修饰符 |
| override,tailrec,crossinline| 重写、尾递归、内联函数相关  |

## 运算符

| 运算符 | 描述 |
|--------|------|
| `+`, `-`, `*`, `/`, `%` | 基础数学运算（加减乘除取余） |
| `+=`, `-=`, `*=`, `/=`, `%=` | 复合赋值运算 |
| `++`, `--` | 递增递减运算 |
| `&&`, `||`, `!` | 逻辑运算（与/或/非） |
| `==`, `!=` | 相等性比较（值相等/引用相等） |
| `<`, `>`, `<=`, `>=` | 比较运算 |
| `&`, `|`, `^`, `~` | 位运算（与/或/异或/非） |
| `&=`, `|=`, `^=`, `<<=`, `>>=` | 位运算复合赋值 |
| `<<`, `>>` | 位移运算 |
| `?.`, `?:`, `!!` | 空安全操作（安全调用/Elvis/非空断言） |
| `..`, `..<`, `..=` | 区间操作（半开/闭合区间） |
| `&`, `*` | 取址/指针操作 |
| `::`, `.`, `?` | 类型/成员访问（类引用/成员访问/可空标记） |
| `=`, `->`, `=>` | 基础操作符（赋值/返回类型/模式匹配） |
| `@`, `:`, `;`, `$`, `_` | 辅助符号（模式绑定/类型声明/语句结束/模板变量/参数占位） |

## 数据类型

### 整型
| 长度 | 有符号类型 | 无符号类型 |
|------|------------|------------|
| 8 位 | i8 | u8 |
| 16 位 | i16 | u16 |
| 32 位 | i32 | u32 |
| 64 位 | i64 | u64 |
| 128 位 | i128| u128|
| arch  | isize | usize |

### 字面量
| 字面量 | 说明 | 示例 |
|--------|------|------|
| 数字字面量 | 十进制 | 98_222 |
|  | 十六进制 | 0xff |
|  | 八进制   | 0o77 |
|  | 二进制   | 0b1111_0000 |
| 字节 (仅限于 u8) | 字符字面量 | b'A' |

### 浮点类型
| 长度 | 类型 |
|------|------|
| 32 位 | f32 |
| 64 位 | f64 |

### 布尔类型
| 类型 | 说明 |
|------|------|
| bool | true/false |

### 字符类型
| 类型 | 说明 |
|------|------|
| char | 单字符 |

### 复合类型
#### 元组类型
| 类型 | 说明 |
|------|------|
| (T1, T2, ..., Tn) | 包含 n 个元素的元组 |
#### 数组类型
| 类型 | 说明 |
|------|------|
| [T; N] | 包含 N 个元素的数组 |
#### 切片类型
| 类型 | 说明 |
|------|------|
| slice(T) | 切片 |
#### 字符串类型
| 类型 | 说明 |
|------|------|
| str | 不可变字符串 |
| String | 可变字符串 |
### 空类型
| 类型 | 说明 |
|------|------|
| () | 空元组 |
| ! | 非空类型 |
| ? | 可空类型 |

## 贡献

欢迎提交 issue 和 pull request 参与贡献！

## 许可证

本项目采用 MIT 和 Apache 2.0 双重许可，详见 [LICENSE-MIT](./LICENSE-MIT) 与 [LICENSE-APACHE](./LICENSE-APACHE)。

## 联系方式

- 作者：guangyiliushan
- 项目主页：https://github.com/guangyiliushan/scp